<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script src="http://cytoscape.github.io/cytoscape.js/api/cytoscape.js-latest/cytoscape.min.js"></script>
<script src="https://cdn.rawgit.com/cytoscape/cytoscape.js-cose-bilkent/1.0.2/cytoscape-cose-bilkent.js"></script>

<style>
      body {
        font-family: helvetica;
        font-size: 14px;
      }
      #cy {
        width: 100%;
        height: 100%;
        position: absolute;
        left: 0;
        top: 0;
        z-index: 999;
      }
      h1 {
        opacity: 0.5;
        font-size: 1em;
      }
</style>


<script>
      $(function(){
        var cy = window.cy = cytoscape({
          container: document.getElementById('cy'),
          boxSelectionEnabled: false,
          autounselectify: true,
          
          layout: {
            name: 'cose-bilkent'
          },
          style: [
            {
              selector: 'node',
              style: {
                'background-color': '#ad1a66'
              }
            },
            {
              selector: 'edge',
              style: {
                'width': 3,
                'line-color': '#ad1a66'
              }
            }
          ],   elements: [{"data":{"id":"glyph9","sbgnbbox":{"x":1452.639173965406,"y":609.3619416544145,"w":"120.0","h":"60.0"},"sbgnclass":"macromolecule","sbgnlabel":"hexokinase","sbgnstatesandinfos":[],"ports":[]},"position":{"x":1452.639173965406,"y":609.3619416544145},"group":"nodes","removed":false,"selected":false,"selectable":true,"locked":false,"grabbed":false,"grabbable":true,"classes":""}]

        });
        $('#b2').on('click', function() {a
          cy.center();
        });

      });



function myFunction() {
  var jdata = {};
  jdata.data = $("#data1").val();
  
  $.ajax({
        url: 'http://10.21.72.137:8081/data',
        data: jdata, //'{"data": "Hehehe"}',
        type: 'POST',
//        jsonpCallback: 'callback', // this is not relevant to the POST anymore
        success: function (data) {
            var ret = jQuery.parseJSON(data);
            $('#demo').html(JSON.stringify(ret))
            //alert( JSON.stringify(ret.body))

            var cy = cytoscape( {
              container: document.getElementById('cy'),
              layout: {
                name: 'grid'
              },
              elements: ret.elements,
              style: [
                {
                  selector: 'node',
                  style: {
                    'background-color': '#666',
                    'label': 'data(id)'
                  }
                },
                {
                  selector: 'edge',
                  style: {
                    'width':3,
                    'line-color': '#ccc',
                    'target-arrow-color': '#ccc',
                    'target-arrow-shape': 'triangle'
                  }
                }
              ]
            })
            cy.resize()
            
            console.log('Success: ')
        },
        error: function (xhr, status, error) {
            console.log('Error: ' + error.message);
            $('#demo').html('Error connecting to the server-[' + error.message + ']');
        },
    });
}
</script>
</head>

<body>

<h1>My Web Page</h1>

<p id="demo">A Paragraph</p>

<button type="button" onclick="myFunction()">Try it</button>
<button type="button" id="b2">bbb</button>
<input type="text" id="data1" value="1122dd"/>
<div id="cy"></div>
</body>
</html>
